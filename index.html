<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>collector</title>
	<link rel="stylesheet" type="text/css" href="easyui/themes/default/easyui.css">
	<link rel="stylesheet" type="text/css" href="easyui/themes/icon.css">
	<script src="font/iconfont.js"></script>
	<script type="text/javascript" src="easyui/jquery.min.js"></script>
	<script type="text/javascript" src="easyui/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="readicd.js"></script>
	<script type="text/javascript" src="failuremodeling.js"></script>
	<script type="text/javascript" src="msdchooseIcd.js"></script>
	<script type="text/javascript" src="openFDE.js"></script>
	<style>
		.icon {
			width: 1.5em;
			height: 1.5em;
			vertical-align: -0.15em;
			fill: currentColor;
			overflow: hidden;
		}

		.l-btn-text {
			width: 100%;
		}

		.radiobutton-inner {
			background-color: dimgray;
		}

		.radiobutton {
			border: 1px solid black;
		}

		.IcdMessageRef:hover {
			background-color: #E0ECFF;
		}
	</style>
</head>

<body class="easyui-layout">

	<!-- 上面 -->
	<div id="toptabs" data-options="region:'north',split:true" class="easyui-tabs" style="height:120px;">

		<div id="hmTop" title="Home" style="padding-top: 5px; padding-left:10px;display:none;">
			<button onclick="javascript:$('#_easyui_tree_49').click()"
				style="width: 60px;height: 60px;border-color: #eef0f2;position: relative;margin: 5px;margin-left: 0;">
				<svg class="icon" aria-hidden="true" style="width: 2.5em;height:2.5em">
					<use xlink:href="#icon-chuangjianfuwu"></use>
				</svg>
				<span>New</span>
			</button>

			<!-- <a href="writexml.php">下载a.jpg</a> -->
			<button onclick="clickFile()"
				style="width: 60px;height: 60px;border-color: #eef0f2;position: relative;margin: 5px;margin-left: 0;">
				<svg class="icon" aria-hidden="true" style="width: 2.5em;height:2.5em">
					<use xlink:href="#icon-dakai"></use>
				</svg>
				<span>Open</span>
			</button>
			<form id="openxml" method="post" enctype="multipart/form-data" style="display: none;">
				<input id="up" type="file" name="file1" accept=".xml" onchange="send(value)">
			</form>
			<button onclick="save()"
				style="width: 60px;height: 60px;border-color: #eef0f2;position: relative;margin: 5px;margin-left: 0;">
				<svg class="icon" aria-hidden="true" style="width: 2.5em;height:2.5em">
					<use xlink:href="#icon-lingcunwei"></use>
				</svg>
				<span>Saveas</span>
			</button>

		</div>
		<div id="frTop" title="Fault Report" style="overflow:auto;padding-top: 5px; padding-left:10px;display:none;"
			data-options="showHeader:true">
			<!-- 打开fde -->
			<button onclick="clickfdeFile()"
				style="width: 60px;height: 60px;border-color: #eef0f2;position: relative;margin: 5px;margin-left: 0;">
				<svg class="icon" aria-hidden="true" style="width: 1.5em;height:1.5em">
					<use xlink:href="#icon-lingcunwei"></use>
				</svg>
				<span>Import FDE</span>
			</button>
			<form id="openfde" method="post" enctype="multipart/form-data" style="display: none;">
				<input id="opFDE" type="file" name="file1" accept=".xml" onchange="sendfde(value)">
			</form>
		</div>
		<div id="eTop" title="Edit" style="overflow:auto;padding-top: 5px; padding-left:10px;display:none;">
			<!-- 打开icd -->
			<button onclick="clickicdFile()"
				style="width:60px;height: 60px;border-color: #eef0f2;position: relative;margin: 1px;margin-left: 0;">
				<svg class="icon" aria-hidden="true" style="width: 2.5em;height:2.5em">
					<use xlink:href="#icon-dakai"></use>
				</svg>
				<span>instance</span>
			</button>

			<form id="openicd" method="post" enctype="multipart/form-data" style="display: none;">
				<input id="new" type="file" name="file1" accept=".xml" onchange="sendicd(value)">
			</form>

			<button onclick="clickicdclassFile()"
				style="width:60px;height: 60px;border-color: #eef0f2;position: relative;margin: 1px;margin-left: 0;">
				<svg class="icon" aria-hidden="true" style="width: 2.5em;height:2.5em">
					<use xlink:href="#icon-dakai"></use>
				</svg>
				<span>class</span>
			</button>

			<form id="openclass" method="post" enctype="multipart/form-data" style="display: none;">
				<input id="icdclass" type="file" name="file1" accept=".xml" onchange="sendicdclass(value)">
			</form>
		</div>
		<div id="itTop" title="Initiated Test" style="overflow:auto;padding:20px;display:none;">
		</div>
		<div id="fTop" title="Failure" style="overflow:auto;padding:20px;display:none;">
		</div>
	</div>
	<div data-options="region:'south',title:'Error',split:true" style="height:100px;"></div>
	<!-- 右侧 -->
	<!-- <div data-options="region:'east',title:'Tips',split:true" style="width:200px;">
		<span>The Data Entry Tool is used to collect Member System data based on the specific ICD version.
			It helps supplier validate their data entry and export a MSD file.
		</span>
	</div> -->
	<!-- 左侧 -->
	<div data-options="region:'west',title:'Navagation',split:true" style="width:300px;">
		<ul id="tt" class="easyui-tree" data-options="data:left_tt,method:'get',url:'directory.json',animate:true"></ul>
	</div>
	<!-- 中间 -->
	<div data-options="region:'center',title:'Data Entry'" style="padding:1px;background:#eee;">
		<!-- icd information -->
		<div id="icdinfo" style="height:100%;width:100%;background-color: #E0ECFF;display:none">
			<form method="post" style="padding:20px">
				<div style="margin-bottom:10px">
					<input id="InstanceLoc" class="easyui-textbox" name="e" style="width:900px"
						data-options="label:'ICD Instance File Location',labelWidth:200,readonly:true">
				</div>
				<div style="margin-bottom:10px">
					<input id="classLoc" class="easyui-textbox" name="email" style="width:900px;"
						data-options="label:'ICD Class File Locaton',labelWidth:200">
				</div>
				<div style="margin-bottom:10px">
					<label for="username" style="width:195px;display: inline-block;" class="label-top">Block
						Point</label>
					<input id="username" class="easyui-validatebox textbox  tb"
						style="width:700px;height: 28px;line-height: 28px;"
						data-options="required:true,validType:'minLength[1]'">
				</div>
				<div style="margin-bottom:10px">
					<input id="createtime" class="easyui-textbox" name="subject" style="width:900px"
						data-options="label:'Data Produced',labelWidth:200,readonly:true">
				</div>
				<div style="margin-bottom:10px">
					<input id="version" class="easyui-textbox" name="subject" style="width:900px"
						data-options="label:'Schema Revison',labelWidth:200,readonly:true">
				</div>
			</form>
			<div style="text-align: center;">
				<a class="easyui-linkbutton" href="javascript:void(0)" onclick="icdsubmit()"
					style="width:100px">Submit</a>
				<a class="easyui-linkbutton" href="javascript:void(0)" onclick="" style="width:100px">Cancel</a>
			</div>

		</div>
		<!-- Member System Modeling Data -->
		<div id="msmd" class="easyui-tabs " style="height:100%;width:100%;display: none;">
			<div title="Basic Information" style="padding:20px;height:90%;">
				<form id="ff" method="post">
					<div style="margin-bottom:10px">
						<input id="memName" class="easyui-textbox" name="e" style="width:800px"
							data-options="label:'Member System Name',labelWidth:300">
					</div>
					<div style="margin-bottom:10px">
						<input id="msi" class="easyui-textbox" name="email" style="width:800px"
							data-options="label:'Member System ID',labelWidth:300">
					</div>
					<div style="margin-bottom:10px">
						<input id="as" class="easyui-textbox" name="subject" style="width:800px"
							data-options="label:'ATA System',labelWidth:300">
					</div>
					<div style="margin-bottom:10px">
						<select ID="Language" class="easyui-combobox" name="language" label="Language"
							style="width:800px" data-options="label:'Protocal type',labelWidth:300,panelHeight:120">
							<option value="ar">Arabic</option>
							<option value="bg">Bulgarian</option>
							<option value="ca">Catalan</option>
							<option value="zh-cht">Chinese Traditional</option>
						</select>
					</div>
					<div style="margin-bottom:10px">
						<input ID="msd" class="easyui-textbox" name="message" style="width: 800px;height:60px"
							data-options="label:'Member System Description',labelWidth:300,multiline:true">
					</div>
					<div style="margin-bottom:10px">
						<span style="display:inline-block ;width:300px">Is Optional Equipment</span>
						<input id="oe" class="easyui-radiobutton" name="1" value="Option Equipment"
							label="Option Equipment" style="color: rgb(133,133,133);width: 15px;height: 15px;"
							data-options="labelWidth:200,labelPosition:'after'">
						<input id="se" class="easyui-radiobutton" name="1" value="Standard Equipment"
							style="color: rgb(133,133,133);width: 15px;height: 15px;" label="Standard Equipment"
							data-options="labelWidth:300,labelPosition:'after'">
					</div>
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px">Transmits Reports During Power Up</span>
						<input id="trdpu" type="checkbox">
					</div>

					<!-- functions -->
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px">Supports Fault Reporting</span>
						<input id="supportFR" type="checkbox">
					</div>
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px"> Supports Initiated Test</span>
						<input id="supportIT" type="checkbox">
					</div>
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px"> Supports Configuration Reporting</span>
						<input id="supportCR" type="checkbox">
					</div>
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px">Supports Data Load</span>
						<input id="supportDL" type="checkbox">
					</div>
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px">Supports Fault History Retrieval</span>
						<input id="supportFHR" type="checkbox">
					</div>
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px">Type of Fault History Retrieval</span>
						<input class="easyui-radiobutton" name="3" value="Option Equipment" label="Multiple"
							style="color: rgb(133,133,133);width: 15px;height: 15px;"
							data-options="labelWidth:220,labelPosition:'after'">
						<input class="easyui-radiobutton" name="3" value="Standard Equipment" label="Single"
							style="color: rgb(133,133,133);width: 15px;height: 15px;"
							data-options="labelWidth:220,labelPosition:'after'">
					</div>
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px">Transmits Reports During Power Up</span>
						<input id="transmitsRDRP" type="checkbox">
					</div>
					<div style="margin-bottom:20px">
						<span style="display:inline-block ;width:300px">Supports Fault History Reset</span>
						<input id="supportFHR" type="checkbox">
					</div>
				</form>
				<div style="text-align: center;margin-bottom:20px">
					<a class="easyui-linkbutton" href="javascript:void(0)" onclick="msmdsubmit()"
						style="width:100px">Submit</a>
					<a class="easyui-linkbutton" href="javascript:void(0)" onclick="" style="width:100px">Cancel</a>
				</div>
			</div>
			<div title="ARINC 429" style="overflow:auto;padding:2px;display:none;">

				<div id="frl" title="Fault Reporting Lable" class="easyui-datalist" style="width:100%;height:100%"
					data-options="
					checkbox: true,
					selectOnCheck: false,
					onBeforeSelect: function(){return false;}
					">
				</div>
			</div>
		</div>
		<!-- Data Load -->
		<div id="dl" style="height:100%;width:100%;background-color: #E0ECFF;display:none">
			<form method="post" style="padding:20px;height:100%;">
				<div style="margin-bottom:5px">
					<input id="ProtocolType" class="easyui-textbox" name="e" style="width:900px"
						data-options="label:'OADLF Protocal Type',labelWidth:200,readonly:true">
				</div>
				<div style="margin-bottom:5px">
					<input id="resetTime" class="easyui-textbox" name="email" style="width:900px;"
						data-options="label:'Reset Time',labelWidth:200">
				</div>
				<div style="margin-bottom:5px">
					<input id="LoadConditionText" class="easyui-textbox" name="subject"
						style="width:900px;word-wrap:break-word;height: 50px;"
						data-options="label:'Load Conditional Text',labelWidth:200,multiline:true">
				</div>

				<div style="margin-bottom:5px">
					<input id="LoadAttachedDiscrete" class="easyui-textbox" name="subject" style="width:900px"
						data-options="label:'Load Attached Discrete',labelWidth:200,readonly:true">
				</div>
			</form>
		</div>
		<!-- 左右两格的布局 -->
		<!-- <div class="easyui-layout" data-options="fit:true" style="height: 100%;width:100%">
				<div data-options="region:'center',split:'true',title:'Navagation'," style="width: 300px;height: 100%;">
				</div>
				<div id="BindingItems" data-options="region:'west',split:'true',title:'Navagation'"
					style="width: 300px;height: 100%;">
				</div>
			</div> -->
		<!-- Failure Modeling Data -->
		<div id="FailureModelingData" class="easyui-layout" data-options="fit:true" style="height: 100%;width:100%">
			<div data-options="region:'center',split:'true'," class="easyui-tabs" style="width: 300px;height: 100%;">
				<!-- 基础数据tab1 -->
				<div title="Failure Modeling Data" style="padding:20px;display:none;">
					<div style="margin-bottom:5px">
						<input id="" class="easyui-textbox" name="e" style="width:500px"
							data-options="label:'FIM Code',labelWidth:150">
					</div>
					<div style="margin-bottom:5px">
						<input id="" class="easyui-textbox" name="e" style="width:500px"
							data-options="label:'Failure Name',labelWidth:150">
					</div>
					<div style="margin-bottom:5px">
						<label for="username" style="width:145px;display: inline-block;" class="label-top">Failure
							Rate</label>
						<input id="" class="easyui-validatebox textbox  tb"
							style="width:350px;height: 28px;line-height: 28px;"
							data-options="required:true,validType:'minLength[1]'">
					</div>
					<div style="margin-bottom:5px">
						<input id="" class="easyui-textbox" name="e" style="width:500px"
							data-options="label:'FMES Failure Identifier',labelWidth:150">
					</div>
					<div style="margin-bottom:5px">
						<input id="" class="easyui-textbox" name="e" style="width:500px"
							data-options="label:'Failure Message',labelWidth:150">
					</div>
					<div style="margin-bottom:5px">
						<input id="" class="easyui-textbox" name="e" style="width:500px"
							data-options="label:'Maintenance Text',labelWidth:150">
					</div>
					<div style="margin-bottom:5px">
						<span style="display:inline-block ;width:300px"> Greater Than 2hrs</span>
						<input id="" type="checkbox">
					</div>
					<div style="margin-bottom:5px">
						<label for="username" style="width:145px;display: inline-block;" class="label-top">Maintenance
							Time</label>
						<input id="" class="easyui-validatebox textbox  tb"
							style="width:350px;height: 28px;line-height: 28px;"
							data-options="required:true,validType:'minLength[1]'">
					</div>
				</div>
				<!-- 可勾选列表tab2 -->
				<div title="Storable Fight Phase" style="overflow:auto;padding:20px;display:none;">
					<div style="margin-bottom:20px;">
						<a href="#" class="easyui-linkbutton" onclick="collapseAll()">ALL</a>
						<a href="#" class="easyui-linkbutton" onclick="expandAll()">None</a>
					</div>
					<div class="easyui-panel" style="padding:5px">
						<ul id="fightPhase1" class="easyui-tree"
							data-options="data:fightPhase,animate:true,checkbox:true"></ul>
					</div>
				</div>
				<!-- tab3 -->
				<div title="Fault Reports List" style="overflow:auto;padding:5px;display:none;">
					<div class="easyui-layout" style="width: 100%;height:100%">
						<div data-options="region:'west'" style="width:300px;height: 100%;">
							<table id="activeFaultRep" class="easyui-datagrid"
								data-options="singleSelect:true,collapsible:true,multiSort:true">
								<thead>
									<tr>
										<th data-options="field:'Name',width:220,align:'center'">Name</th>
										<th data-options="field:'Confidences',width:80,align:'center'">Confidences</th>
									</tr>
								</thead>
							</table>
						</div>
						<div data-options="region:'center'" style="width:250px;height: 100%;">
							<div id="frms" class="easyui-datalist" style="width:100%;height:100%" data-options="checkbox: true,selectOnCheck: false,
						onBeforeSelect: function(){return false;}
						">
							</div>
						</div>
					</div>
				</div>
			</div>
			<div data-options="region:'west',split:'true',title:'Navagation'" style="width: 400px;height: 100%;">
				<div id="ppfmd" class="easyui-pagination" style="background:#efefef;border:1px solid #ccc;">
				</div>
				<div id="FailtureReportingfmd" class="easyui-panel" style="height: 560px;width:100%">
				</div>
			</div>
		</div>
		<!-- fualt Report -->
		<div id="fualtReport" class="easyui-layout" data-options="fit:true" class="easyui-tabs"
			style="height: 100%;width:100%">
			<!-- 右侧 -->
			<div data-options="region:'center',split:'true'," style="width: 300px;height: 100%;">
				<div id="frRight1" class="easyui-tabs" style="width:100%;height:100%">
					<!-- 基础数据tab1 -->
					<div title="Basic Data" style="padding:20px;display:none;">
						<div style="margin-bottom:5px">
							<input id="Name" class="easyui-textbox" name="e" style="width:700px"
								data-options="label:'Fault Report Name',labelWidth:300">
						</div>
						<div style="margin-bottom:5px">
							<input id="Type" class="easyui-textbox" name="e" style="width:700px"
								data-options="label:'Fault Report Type',labelWidth:300">
						</div>
						<div style="margin-bottom:5px">
							<input id="Delay" class="easyui-textbox" name="e" style="width:700px"
								data-options="label:'Fault Report Delay',labelWidth:300">
						</div>
						<div style="margin-bottom:5px">
							<input id="Detect" class="easyui-textbox" name="e" style="width:700px"
								data-options="label:'Time Delay(Detect)',labelWidth:300">
							<span>Seconds</span>
						</div>
						<div style="margin-bottom:5px">
							<input id="Clear" class="easyui-textbox" name="e" style="width:700px"
								data-options="label:'Time Delay(Clear)',labelWidth:300">
							<span>Seconds</span>
						</div>
					</div>
					<!-- 可勾选列表tab2 -->
					<div title="Storable Fight Phase" style="overflow:auto;padding:20px;display:none;">
						<div style="margin-bottom:20px;">
							<a href="#" class="easyui-linkbutton" onclick="collapseAll()">ALL</a>
							<a href="#" class="easyui-linkbutton" onclick="expandAll()">None</a>
						</div>
						<div class="easyui-panel" style="padding:5px">
							<ul id="fightPhase" class="easyui-tree"
								data-options="data:fightPhase,animate:true,checkbox:true"></ul>
						</div>
					</div>
					<!-- tab3 -->
					<div title="Fight Deck Effect" style="overflow:auto;padding:20px;display:none;">
						<div id="fde" class="easyui-datalist" style="width:100%;height:100%" data-options="
					checkbox: true,
					selectOnCheck: false,
					onBeforeSelect: function(){return false;}
					">
						</div>
					</div>
				</div>

				<div id="frRight2" style="width:100%;height:100%">
					<!-- tab1 -->
					<div class="easyui-panel" title="Please Config The DownstreamFaults">
						<div id="pcdf" class="easyui-datalist" data-options="
						checkbox: true,
						selectOnCheck: false,
						onBeforeSelect: function(){return false;}
						">
						</div>
					</div>
				</div>
			</div>
			<!-- 左侧 -->
			<div data-options="region:'west',split:'true'" style="width: 400px;height: 100%;position: relative;">
				<div id="pp" class="easyui-pagination" style="background:#efefef;border:1px solid #ccc;">
				</div>
				<div id="FaultReporting" class="easyui-panel" style="height: 430px;width:100%">

				</div>
			</div>
		</div>
		<!-- OMS Communication Message -->
		<!-- ttt -->
		<div id="ttt">
			<a href="#" class="icon-edit" onclick="$('#w').window('open')"></a>
		</div>
		<div id="mm" class="easyui-menu" style="width:120px;">
			<div onclick="removeit()" data-options="iconCls:'icon-remove'">Remove</div>
		</div>
		<div id="OMSCommunicationMsg" class="easyui-layout" data-options="fit:true" style="height: 100%;width:100%">
			<div data-options="region:'center',split:'true',title:'ICD Messages',tools:'#ttt'"
				style="width: 300px;height: 100%;">
				<div class="easyui-panel" data-options="fit:true">
					<!-- <div data-options="region:'west'" style="width:100%"> -->
					<ul id="omslist" class="easyui-tree" data-options="collapsed:true,onContextMenu: function(e,node){
						e.preventDefault();
						$(this).tree('select',node.target);
						$('#mm').menu('show',{
							left: e.pageX,
							top: e.pageY
						});
					}"></ul>
					<!-- </div> -->
					<!-- <div id="rightOMS" data-options="region:'center'">
						 每一行的信息 
						<div class="IcdMessageRef" style=" display: flex;justify-content: space-between;height: 30px;">
							<div style="width: 250px;height: 30px;line-height:30px;padding-left: 10px;">
								11111</div>
							<div style="width: 50px;">
								<svg class="icon" aria-hidden="true" style="height: 25px;line-height:25px;">
									<use xlink:href="#icon-xiangzuo" color="#f4a460"></use>
								</svg>
							</div>
						</div>
					</div> -->
				</div>
			</div>
			<!-- 左侧 -->
			<div data-options="region:'west',split:'true'" style="width: 400px;height: 100%;">
				<div id="ppoms" class="easyui-pagination" style="background:#efefef;border:1px solid #ccc;">
				</div>
				<div id="OmsMessages" class="easyui-panel" style="height: 400px;width:100%">
					<a href="#" class="easyui-linkbutton"
						style="width: 100%;padding:5px;word-wrap:break-word;position: relative;">
						<div style=" display: flex;justify-content: space-between;">
							<div style="width: 250px;">
								11111</br>111111</div>
							<div style="width: 50px;">
								<svg class="icon" aria-hidden="true" style="height: 50px;line-height:50px;">
									<use xlink:href="#icon-xiangzuo" color="#f4a460"></use>
								</svg>
							</div>
						</div>
					</a>
				</div>
			</div>
		</div>
		<!-- Member System Status -->
		<div id="StatusMessage" class="easyui-layout" data-options="fit:true" class="easyui-tabs"
			style="height: 100%;width:100%">
			<!-- 右侧 -->
			<div data-options="region:'center',split:'true'," style="height: 100%;">
				<table id="A429" class="easyui-datagrid"
					data-options="singleSelect:true,collapsible:true,multiSort:true">
					<thead>
						<tr>
							<th
								data-options="field:'bitoffsetwithinDs',width:80,align:'center',sortable:true,sorter:numSorter">
								Bit Position</th>
							<th data-options="field:'Name',width:250,align:'center'">Name</th>
							<th data-options="field:'type',width:150,align:'center'">Type</th>
						</tr>
					</thead>
				</table>
			</div>
			<!-- 左侧 -->
			<div data-options="region:'west',split:'true'" style="width: 480px;height: 480px;position: relative;">
				<div id="ppsm" class="easyui-pagination" style="background:#efefef;border:1px solid #ccc;">
				</div>

				<div id="StatusMessageList" class="easyui-panel" style="height: 460px;width:470px">

				</div>
			</div>
		</div>
		<!-- Initiated Test -->
		<div id="initiatedTest" class="easyui-layout" data-options="fit:true" class="easyui-tabs"
			style="height: 100%;width:100%">

			<div data-options="region:'center',split:'true'," style="height: 100%;">
				<!-- 右侧 1-->
				<div id="itRight1" class="easyui-tabs">
					<!-- 基础数据tab1 -->
					<div title="Basic Data" style="padding:20px;display:none;">
						<div style="margin-bottom:5px">
							<input id="tm" class="easyui-textbox" name="e" style="width:500px"
								data-options="label:'Test Name',labelWidth:180">
						</div>
						<div style="margin-bottom:5px">
							<input id="tic" class="easyui-textbox" name="e" style="width:500px"
								data-options="label:'Test Identification Code',labelWidth:180">
						</div>
						<div style="margin-bottom:5px">
							<input id="tst" class="easyui-textbox" name="e" style="width:500px"
								data-options="label:'Test Type',labelWidth:180">
						</div>
						<div style="margin-bottom:5px">
							<input id="tdt" class="easyui-textbox" name="e" style="width:500px"
								data-options="label:'Test Duration Time',labelWidth:180">
							<span>Minutes</span>
						</div>
						<div style="margin-bottom:5px">
							<span style="display:inline-block ;width:170px"> Test Is Abortable</span>
							<input id="tia" type="checkbox" name="accept" value="true">
							<span>True</span>
						</div>
						<div style="margin-bottom:5px">
							<span style="display:inline-block ;width:170px"> Able To Test Bit Applies</span>
							<input id="atba" type="checkbox" name="accept" value="true">
							<span>Enable</span>
						</div>
						<div style="margin-bottom:5px">
							<span style="display:inline-block ;width:170px"> Is Interactive Test</span>
							<input id="iit" type="checkbox" name="accept" value="true">
							<span>Enable</span>
						</div>
						<div style="margin-bottom:5px">
							<span style="display:inline-block ;width:170px">Pass/Fail Detection Method</span>
							<input id="auto" class="easyui-radiobutton" name="4" value="Automatic" label="Automatic"
								style="color: rgb(133,133,133);width: 15px;height: 15px;"
								data-options="labelWidth:150,labelPosition:'after'">
							<input id="none" class="easyui-radiobutton" name="4" value="None" label="None"
								style="color: rgb(133,133,133);width: 15px;height: 15px;"
								data-options="labelWidth:150,labelPosition:'after'">
						</div>
					</div>
					<!-- tab2 -->
					<div title="Failing Faults" style="padding:20px;display:none;">

					</div>
					<!-- tab3 -->
					<div title="Precondition" style="padding:20px;display:none;">

					</div>
					<!-- tab3 -->
					<div title="Inhibit Condition" style="padding:20px;display:none;">

					</div>
				</div>
				<!-- 右侧2 -->
				<div id="itRight2" class="easyui-tabs">
					<!-- tab1 -->
					<div title="Please Config The Interfering Tests" style="padding:20px;display:none;width: 100%;">
						<div id="pcit" class="easyui-datalist" style="width:100%;height:100%" data-options="
						checkbox: true,
						selectOnCheck: false,
						onBeforeSelect: function(){return false;}
						">
						</div>
					</div>
				</div>
			</div>
			<!-- 左侧 -->
			<div data-options="region:'west',split:'true'" style="width: 300px;height: 480px;position: relative;">
				<div id="ppit" class="easyui-pagination" style="background:#efefef;padding:1px solid #ccc;">
				</div>

				<div id="initiatedTestData" class="easyui-panel" style="height: 380px;width:295px">

				</div>
			</div>

		</div>
	</div>

	<!-- import icd message 从oms右侧进去 -->
	<div id="w" class="easyui-window" title="import ICD" data-options="iconCls:'icon-save',closed:true"
		style="width:900px;height:700px;padding:5px;">
		<div class="easyui-layout" data-options="fit:true">
			<div data-options="region:'east',split:true" style="width:100%;height: 250px;">
				<ul id="icdlist" class="easyui-tree" data-options="collapsed:true,checkbox:true"></ul>
			</div>
			<!-- <div data-options="region:'center'" style="padding:15px;width:100%;">
				<div id="iimc" class="easyui-datalist" style="width:100%;" data-options="
				checkbox: true,
				selectOnCheck: false,
				onBeforeSelect: function(){return false;}
				">
				</div>
			</div> -->
			<div data-options="region:'south'" style="text-align:center;height: 300px;">
				<div id="iims" class="easyui-datalist" style="width:100%;height: 250px;margin-bottom: 5px;"
					data-options="	">
				</div>
				<a class="easyui-linkbutton" href="javascript:void(0)" onclick="puticd()" style="width:80px">Ok</a>
				<a class="easyui-linkbutton" href="javascript:void(0)" onclick="javascript: $('#w').window('close')"
					style="width:80px">Cancel</a>
			</div>
		</div>
	</div>
	<!-- import fde 提示引入的fde条数的win小框 -->
	<div id="fdeTipWin" class="easyui-window" title="Flight Deck Effect" data-options="iconCls:'icon-save',closed:true"
		style="width:400px;height:150px;padding:5px;">
		<div data-options="region:'east',split:true" style="width:100%;height: 50px;">
			<div id="fdetipnum"></div>
		</div>
		<div data-options="region:'south'" style="text-align:center;height: 20px;">
			<a id="informFDE" class="easyui-linkbutton" onclick="importFlightDeckEffect()"  style="width:80px">确定</a>
		</div>
	</div>
</body>
<script type="text/javascript">
	let left_tt = [{
		"id": 1,
		"text": "Start Page"
	}, {
		"id": "test",
		"text": "ICD Information",

	}]

	function save() {
		$.post("./writexml.php", function (result) {
			//console.log(result)

		})
	}
	function clickFile() {
		const input = document.querySelector('#up')
		input.click()
	}
	let readurl = ""
	// function init(){
	// 	if(readurl!=""){
	// 		start(readurl)
	// 	}
	// }
	let xml = {}

	function send() {
		$('#openxml').form({
			url: "readxml.php",
			success: function (data) {
				//alert(data)	
				readurl = data
				xml = start(data)
			}
		})
		$('#openxml').submit()
	}

	function showTree() {
		document.getElementById("_easyui_tree_54").style.display = "none"
		document.getElementById("_easyui_tree_57").style.display = "none"
		document.getElementById("_easyui_tree_58").style.display = "none"
		document.getElementById("_easyui_tree_51").style.display = "none"
		document.getElementById("_easyui_tree_52").style.display = "none"
		document.getElementById("_easyui_tree_53").style.display = "none"
		document.getElementById("_easyui_tree_55").style.display = "none"
		document.getElementById("_easyui_tree_59").style.display = "none"

		document.getElementById("_easyui_tree_60").style.display = "none"
	}

	let fightPhase = [{
		"text": "Power-On"
	}, {
		"text": "Engine Start"
	},
	{
		"text": "Taxi Out"
	}, {
		"id": 4,
		"text": "Takeoff Roll"
	}, {
		"id": 5,
		"text": "Initial Climb"
	}, {
		"id": 6,
		"text": "Climb"
	}, {
		"id": 7,
		"text": "Cruise"
	}, {
		"id": 8,
		"text": "Descent"
	}, {
		"id": 9,
		"text": "Approach"
	}, {
		"id": 10,
		"text": "Go Around"
	}, {
		"id": 11,
		"text": "Flare"
	}, {
		"id": 12,
		"text": "Rollout"
	}, {
		"id": 13,
		"text": "Taxi in"
	}, {
		"id": 14,
		"text": "Engine Shutdown"
	}, {
		"id": 15,
		"text": "Maintenance"
	}]
	$('#tt').tree({
		onClick: function (node) {
			if (node.text == "Member System Modeling Data") {
				document.getElementById("msmd").style.display = "block"
			} else {
				document.getElementById("msmd").style.display = "none"
			}
			if (node.text == "ICD Information") {
				document.getElementById("icdinfo").style.display = "block"
				$("#toptabs").tabs('select', "Edit")
				//showTree()
			} else {
				document.getElementById("icdinfo").style.display = "none"
			}
			if (node.text == "Data Load") {
				document.getElementById("dl").style.display = "block"
			} else {
				document.getElementById("dl").style.display = "none"
			}
			if (node.text == "Fault Reporting") {
				document.getElementById("fualtReport").style.display = "block"
				document.getElementById("frRight1").style.display = "block"
				document.getElementById("frRight2").style.display = "none"
				$("#toptabs").tabs('select', "Fault Report")
			} else if (node.text == "Basic Info") {
				document.getElementById("fualtReport").style.display = "block"
				document.getElementById("frRight1").style.display = "block"
				document.getElementById("frRight2").style.display = "none"
				$("#toptabs").tabs('select', "Fault Report")
			} else if (node.text == "Downstream Faults") {
				document.getElementById("fualtReport").style.display = "block"
				document.getElementById("frRight2").style.display = "block"
				document.getElementById("frRight1").style.display = "none"
			} else {
				document.getElementById("fualtReport").style.display = "none"
			}
			if (node.text == "Failure Modeling Data") {
				document.getElementById("FailureModelingData").style.display = "block"
			} else {
				document.getElementById("FailureModelingData").style.display = "none"
			}
			if (node.text == "OMS Communication Messages") {
				document.getElementById("OMSCommunicationMsg").style.display = "block"
			} else {
				document.getElementById("OMSCommunicationMsg").style.display = "none"
			}
			if (node.text == "Member System Status") {
				document.getElementById("StatusMessage").style.display = "block"
			} else {
				document.getElementById("StatusMessage").style.display = "none"
			}
			if (node.text == "Initiated Basic Info") {
				document.getElementById("initiatedTest").style.display = "block"
				document.getElementById("itRight1").style.display = "block"
				document.getElementById("itRight2").style.display = "none"
			} else if (node.text == "Initiated Test") {
				document.getElementById("initiatedTest").style.display = "block"
				document.getElementById("itRight1").style.display = "block"
				document.getElementById("itRight2").style.display = "none"
			} else if (node.text == "Interfering Initiated Test") {
				document.getElementById("initiatedTest").style.display = "block"
				document.getElementById("itRight1").style.display = "none"
				document.getElementById("itRight2").style.display = "block"

			} else {
				document.getElementById("initiatedTest").style.display = "none"
			}
			//alert(node.text);  // alert node text property when clicked
		}
	});

	//开始加载xml
	function start(url) {
		let xml = {}
		$.ajax({
			type: 'GET',
			url: url,
			dataType: 'xml',
			success: function (x) {
				xml = x
				let MemberSystemModelingData = xml.getElementsByTagName("MemberSystemModelingData")

				let BindingItems = MemberSystemModelingData[0].getElementsByTagName("BindingItems")
				let OmsMessage = MemberSystemModelingData[0].getElementsByTagName("OmsMessage")
				let StatusMessage = MemberSystemModelingData[0].getElementsByTagName("StatusMessage")
				let FaultReporting = xml.getElementsByTagName("FaultReporting")
				let FaultReportingData = FaultReporting[0].getElementsByTagName("FaultReportingData")
				let FailureData = FaultReporting[0].getElementsByTagName("FailureData")
				let InitiatedTestData = FaultReporting[0].getElementsByTagName("InitiatedTestData")
				let FlightDeckEffectData = xml.getElementsByTagName("FlightDeckEffectData")
				let FaultReportingLabel = xml.getElementsByTagName("FaultReportingLabel")
				makeFaultReportingList(FaultReportingData)
				getMemberSystemModelingData(MemberSystemModelingData[0])
				getFaultReporting(FaultReportingData)
				getARINC615OADLFData(xml)
				getFailureData(FailureData)
				getOmsMessage(OmsMessage, xml)
				getStatusMessage(StatusMessage, xml)
				getInitiatedTest(InitiatedTestData)
				getFlightDeckEffectData(FlightDeckEffectData)
				getFaultReportingLabel(FaultReportingLabel)
				getReadDP(xml)
				return xml
			}
		})
	}



	function getMemberSystemModelingData(MemberSystemModelingData) {
		let attributes = MemberSystemModelingData.attributes
		let a = attributes[1].value
		$("#memName").textbox('setValue', a)
		let msi = attributes[4].value
		$("#msi").textbox('setValue', msi)
		let as = attributes[13].value
		$("#as").textbox('setValue', as)
		let msd = attributes[5].value
		$("#msd").textbox('setValue', msd)
		//document.getElementById("iit").checked = strtoBool(temp[9].value)
		//  automatic
		if (attributes[9].value == "false") {
			$('#se').radiobutton('check')
		} else {
			$('#oe').radiobutton('check')
		}
		document.getElementById("trdpu").checked = strtoBool(attributes[12].value)

	}

	function getFaultReportingLabel(FaultReportingLabel) {
		str = []
		for (let i = 0; i < FaultReportingLabel.length; i++) {

			let label = FaultReportingLabel[i].innerHTML
			let temp = {}
			temp.text = label
			//console.log("8888888888", temp)
			str.push(temp)
		}
		$("#frl").datalist({ data: str })
	}


	//这个列表位于faultreport-->fight deck effect
	function getFlightDeckEffectData(FlightDeckEffectData) {

		let FlightDeckEffectsType = FlightDeckEffectData[0].getElementsByTagName("FlightDeckEffectsType")
		let str = []
		for (let i = 0; i < FlightDeckEffectsType.length; i++) {
			let num = FlightDeckEffectsType[i].attributes[0].value
			let FDEClass = FlightDeckEffectsType[i].attributes[2].value
			let FDEText = FlightDeckEffectsType[i].getElementsByTagName("FDEText")[0].innerHTML

			let temp = {}
			temp.text = num + "&nbsp" + FDEText + "&nbsp" + FDEClass
			str.push(temp)

		}
		//console.log("............", str)
		$("#fde").datalist({ data: str })
	}

	function getInitiatedTestList(pageNumber, pageSize, InitiatedTest, idname) {
		//清空之前的后代元素
		$("#initiatedTestData").empty()
		let len = InitiatedTest.length
		let start = (pageNumber - 1) * pageSize
		let end = start + pageSize

		for (let i = start; i < end; i++) {
			let name = InitiatedTest[i].attributes[1].value
			let InterferingTests = InitiatedTest[i].getElementsByTagName("InterferingTests")
			let FailingFaults = InitiatedTest[i].getElementsByTagName("FailingFaults")
			//console.log("test", InterferingTests)
			//let DownstreamFaultsLength = FaultReportingData[i].getElementsByTagName("DownstreamFaults").length
			let a = $("<a href=\"#\" class=\"easyui-linkbutton l-btn l-btn-small easyui-fluid\"  style=\"width: 100%;padding:5px;word-wrap:break-word;\" ></a>").html(name +
				'</br>' + InterferingTests.length + "Interfering Initiated Tests" + '</br>' + FailingFaults.length + "Failing Faults")
			$(a).click(function () {
				//console.log(InitiatedTest[i].attributes)
				let temp = InitiatedTest[i].attributes
				$("#tm").textbox('setValue', name)
				$("#tic").textbox('setValue', temp[3].value)
				$("#tst").textbox('setValue', temp[4].value)
				$("#tdt").textbox('setValue', temp[6].value)
				document.getElementById("tia").checked = strtoBool(temp[7].value)
				document.getElementById("atba").checked = strtoBool(temp[8].value)
				document.getElementById("iit").checked = strtoBool(temp[9].value)
				//  automatic
				if (temp[5].value == "automatic") {
					$('#auto').radiobutton('check')
				} else {
					$('#none').radiobutton('check')
				}
				//第二个页面test列表
				let names = []
				for (let j = 0; j < InterferingTests.length; j++) {
					let id = InterferingTests[j].attributes[0].value
					let name = idname[id]
					//console.log("llllllllllllllll", name)
					let temp = {}
					temp.text = name
					names.push(temp)
				}
				//console.log("nnnames......",names)
				$("#pcit").datalist({ data: names })
			})

			$("#initiatedTestData").append(a)
		}
	}
	function getidtoName(a) {
		//console.log("ppppp", a)
		let str = {}
		for (let i = 0; i < a.length; i++) {
			//console.log("hhhh",a[i].attributes)
			str[a[i].attributes[0].value] = a[i].attributes[1].value
		}
		//console.log(str)
		return str
	}
	function strtoBool(str) {
		if (str == "true" || str == "True") {
			return true
		} else {
			return false
		}
	}
	function getInitiatedTest(InitiatedTest) {
		let idname = getidtoName(InitiatedTest)
		if (InitiatedTest.length > 10) {
			getInitiatedTestList(1, 10, InitiatedTest, idname)
		} else {
			getInitiatedTestList(1, InitiatedTest.length, InitiatedTest, idname)
		}

		let len = InitiatedTest.length
		$('#ppit').pagination({
			layout: ['list', 'sep', 'first', 'prev', 'sep', 'manual', 'sep', 'next', 'last', 'sep'],
			beforePageText: 'Page',
			afterPageText: 'of {pages}',
			total: len,
			pageList: [10, 20, 50, 100],
			onSelectPage: function (pageNumber, pageSize) {
				getInitiatedTestList(pageNumber, pageSize, InitiatedTest)
			}
		});
	}

	//做一个数组的剪切
	function bitPositionSort(str) {
		let result = []
		let size = 0
		for (let i = 0; i < str.length; i++) {
			let temp = str[i]
			if (str[i].size) {
				result.push(str[i])
				size = str[i].size - 1
			} else {
				if (size > 0) {
					size--
				} else {
					result.push(str[i])
				}
			}
		}
		return result
	}

	//statusMessage
	function getStatusMessageList(pageNumber, pageSize, StatusMessage, xml) {
		//清空之前的后代元素
		$("#StatusMessageList").empty()
		//获取所有的A429words
		let A429Words = xml.getElementsByTagName("A429Word")
		let len = StatusMessage.length
		let start = (pageNumber - 1) * pageSize
		let end = start + pageSize
		//console.log(pageNumber, pageSize, start, end)
		for (let i = start; i < end; i++) {
			let test = StatusMessage[i].attributes[1].value
			//let DownstreamFaultsLength = FaultReportingData[i].getElementsByTagName("DownstreamFaults").length
			let a = $("<a href=\"#\" class=\"easyui-linkbutton l-btn l-btn-small easyui-fluid\"  style=\"width: 100%;padding:5px;word-wrap:break-word;\" ></a>").html(test +
				'</br>' + "0 bits with blank")
			$(a).click(function () {
				let str = new Array(100)
				for (let j = 0; j < 100; j++) {
					str[j] = { bitoffsetwithinDs: j + 1 }
				}
				//console.log(StatusMessage[i])
				for (let j = 0; j < A429Words.length; j++) {
					let name = A429Words[j].attributes[2].value
					if (name == test) {
						let dp = A429Words[j].getElementsByTagName("DP")
						let maxLen = 0
						for (let k = 0; k < dp.length; k++) {
							let temp = {}
							temp.Name = dp[k].attributes[1].value
							temp.type = dp[k].attributes[9].value
							//console.log(dp[k].attributes)
							//str.push(temp)
							let bitoffsetwithinDs = parseInt(dp[k].attributes[5].value) + 1
							let index = bitoffsetwithinDs - 1
							let size = parseInt(dp[k].attributes[6].value)
							temp.size = size
							if (size > 1) {
								let a = bitoffsetwithinDs + size - 1
								bitoffsetwithinDs = bitoffsetwithinDs + "-" + a
								//console.log("jjjjj",bitoffsetwithinDs)
							}
							temp.bitoffsetwithinDs = bitoffsetwithinDs
							//比较然后确定数组长度
							if (bitoffsetwithinDs > maxLen) {
								maxLen = bitoffsetwithinDs
							}
							str[index] = temp
						}
						str.splice(maxLen)
						str = bitPositionSort(str)
					}
				}
				$("#A429").datagrid({ data: str })
			})
			$("#StatusMessageList").append(a)
		}
	}

	function getStatusMessage(StatusMessage, xml) {
		//console.log("ppppp", StatusMessage)
		if (StatusMessage.length > 10) {
			getStatusMessageList(1, 10, StatusMessage, xml)
		} else {
			getStatusMessageList(1, StatusMessage.length, StatusMessage, xml)
		}

		let len = StatusMessage.length
		$('#ppsm').pagination({
			layout: ['list', 'sep', 'first', 'prev', 'sep', 'manual', 'sep', 'next', 'last', 'sep'],
			beforePageText: 'Page',
			afterPageText: 'of {pages}',
			total: len,
			pageList: [10, 20, 50, 100],
			onSelectPage: function (pageNumber, pageSize) {
				getStatusMessageList(pageNumber, pageSize, StatusMessage, xml)
			}
		});
	}


	// 获取omsmsg右侧的数据列表
	function getDPRP(type, id, xml) {

		let data = xml.getElementsByTagName(type)
		//console.log("hhhh",data)
		for (let i = 0; i < data.length; i++) {
			if (id == data[i].attributes[0].value) {
				let name = data[i].attributes[1].value
				let nameNode = data[i].attributes[2].value
				//console.log("name", name, nameNode)
				return nameNode
			}

		}
	}
	//获取所有rp或者dp或者a429，组成id name键值对
	function getRPdpa429(dataName, id, xml) {

		let data = xml.getElementsByTagName(dataName)
		let temp = {}
		//let text=[]
		for (let i = 0; i < data.length; i++) {
			//let t={}


		}
		//console.log(data,str)
		//$("#iimr").datalist({ data: text })
		let b = $("<div class=\"IcdMessageRef\" style=\" display: flex;justify-content: space-between;height: 30px;\">" +
			"<div style=\"width: 250px;height: 30px;line-height:30px;padding-left: 10px;\">" + + "</div>" +
			"<div style=\"width: 50px;\">" +
			"<svg class=\"icon\" aria-hidden=\"true\" style=\"height: 25px;line-height:25px;\">" +
			"<use xlink:href=\"#icon-xiangzuo\" color=\"#f4a460\"></use>" +
			"</svg>" +
			"</div>" +
			"</div >")

		$("#rightOMS").append(b)
		return temp
	}

	let omsNowTree = []
	var DataFormatLabel0 = []
	function getOmsMessageList(pageNumber, pageSize, OmsMessage, xml) {
		$("#OmsMessages").empty()
		let len = OmsMessage.length
		let start = (pageNumber - 1) * pageSize
		let end = start + pageSize
		//为了获取右边的列表数据
		// let dp = getRPdpa429('DP', xml)
		// let rp = getRPdpa429('RP', xml)
		// let a429 = getRPdpa429('A429Word', xml)
		//console.log(pageNumber, pageSize, start, end)
		for (let i = start; i < end; i++) {
			let test = OmsMessage[i].attributes[0].value
			let IsRp = OmsMessage[i].attributes[2].value
			let item = OmsMessage[i].getElementsByTagName("IcdMessageRef")
			//console.log("item", item)
			let len = item.length
			let a = ""
			if (IsRp == "true") {
				a = $("<a href=\"#\" class=\"easyui-linkbutton  l-btn l-btn-small easyui-fluid\" style=\"width: 100%;padding:5px;word-wrap:break-word;position: relative;\">" +
					"<div style=\" display: flex;justify-content: space-between;\">" +
					"<div style=\"width: 300px;\">" + test +
					"</br>" + "Item Count:" + len + "</div>" +
					"<div style=\"width: 50px;\">" +
					"<svg class=\"icon\" aria-hidden=\"true\" style=\"height: 30px;line-height:30px;\">" +
					"<use xlink:href=\"#icon-xiangzuo\"color=\"#32cd32\">" + "</use>" +
					"</svg>" +
					"</div>" +
					"</div>" +
					"</a>")
			} else {
				a = $("<a href=\"#\" class=\"easyui-linkbutton  l-btn l-btn-small easyui-fluid\" style=\"width: 100%;padding:5px;word-wrap:break-word;position: relative;\">" +
					"<div style=\" display: flex;justify-content: space-between;\">" +
					"<div style=\"width: 300px;\">" + test +
					"</br>" + "Item Count:" + len + "</div>" +
					"<div style=\"width: 50px;\">" +
					"<svg class=\"icon\" aria-hidden=\"true\" style=\"height: 30px;line-height:30px;\">" +
					"<use xlink:href=\"#icon-xiangyou\" color=\"#f4a460\">" + "</use>" +
					"</svg>" +
					"</div>" +
					"</div>" +
					"</a>")
			}
			$(a).click(function () {
				$("#rightOMS").empty()
				let len = 0
				let tree = []
				//建树
				for (let j = 0; j < item.length; j++) {
					let id = item[j].attributes[0].value
					let type = item[j].attributes[1].value
					type = type.replace(/\s*/g, "")
					let nameNode = getDPRP(type, id, xml).split(".")
					mergeTree(tree, nameNode)
				}
				omsNowTree = tree
				$("#omslist").tree({ data: tree })
				//在这里进行右上角引入icd的建树操作。开始建立全部icd列表树。并且选择已经被选中的节点
				getDPDom(dps, item)
			})
			$("#OmsMessages").append(a)
		}

	}

	function getOmsMessage(OmsMessage, xml) {
		if (OmsMessage.length > 10) {
			getOmsMessageList(1, 10, OmsMessage, xml)
		} else {
			getOmsMessageList(1, OmsMessage.length, OmsMessage, xml)
		}

		let len = OmsMessage.length
		$('#ppoms').pagination({
			layout: ['list', 'sep', 'first', 'prev', 'sep', 'manual', 'sep', 'next', 'last', 'sep'],
			beforePageText: 'Page',
			afterPageText: 'of {pages}',
			total: len,
			pageList: [10, 20, 50, 100],
			onSelectPage: function (pageNumber, pageSize) {
				getOmsMessageList(pageNumber, pageSize, OmsMessage, xml)
			}
		});
	}
	//nameref树,tree是js对象数组
	function mergeTree(tree, nameNode) {

		if (nameNode.length == 0) {
			return
		}
		//如果这一层已经这个节点值了
		for (let i = 0; i < tree.length; i++) {
			if (tree[i].text == nameNode[0]) {
				mergeTree(tree[i].children, nameNode.slice(1))
				return
			}
		}
		if (nameNode.length == 2) {
			tree.push({ text: nameNode[0], children: [], state: "closed" })
		} else {
			tree.push({ text: nameNode[0], children: [] })
		}

		mergeTree(tree[tree.length - 1].children, nameNode.slice(1))
		return
	}


	//分页加载一部分列表
	function getFaultReportingList(pageNumber, pageSize, FaultReportingData) {
		//清空之前的后代元素
		$("#FaultReporting").empty()

		let len = FaultReportingData.length
		let start = (pageNumber - 1) * pageSize
		let end = start + pageSize
		//console.log(pageNumber, pageSize, start, end)
		for (let i = start; i < end; i++) {
			let test = FaultReportingData[i].attributes[4].value
			let DownstreamFaultsLength = FaultReportingData[i].getElementsByTagName("DownstreamFaults").length
			let a = $("<a href=\"#\" class=\"easyui-linkbutton l-btn l-btn-small easyui-fluid\"  style=\"width: 100%;padding:5px;word-wrap:break-word;\" ></a>").html(test +
				'</br>' + DownstreamFaultsLength + '&nbsp' + 'DownstreamFaults')
			$(a).click(function () {
				//console.log("22222222", FaultReportingData[i])
				let temp = FaultReportingData[i].attributes
				$("#Name").textbox('setValue', temp[4].value)
				$("#Detect").textbox('setValue', temp[5].value)
				$("#Clear").textbox('setValue', temp[6].value)
				$("#Delay").textbox('setValue', temp[7].value)
				let StorableFlightPhasesActiveFault = FaultReportingData[i].getElementsByTagName("StorableFlightPhasesActiveFault")

				for (let i = 0; i < StorableFlightPhasesActiveFault.length; i++) {
					//console.log(StorableFlightPhasesActiveFault[i].textContent)
					let id = StorableFlightPhasesActiveFault[i].textContent
					fightPhase[id - 1].checked = true
				}
				//easyui数据绑定方式
				$("#fightPhase").tree({ data: fightPhase })

			})
			$("#FaultReporting").append(a)
		}
	}

	function getFaultReporting(FaultReportingData) {
		getFaultReportingList(1, 10, FaultReportingData)
		let len = FaultReportingData.length
		$('#pp').pagination({
			layout: ['list', 'sep', 'first', 'prev', 'sep', 'manual', 'sep', 'next', 'last', 'sep'],
			beforePageText: 'Page',
			afterPageText: 'of {pages}',
			total: len,
			pageList: [10, 20, 50, 100],
			onSelectPage: function (pageNumber, pageSize) {
				getFaultReportingList(pageNumber, pageSize, FaultReportingData)
			}
		});
	}

	function getARINC615OADLFData(xml) {
		let temp = xml.getElementsByTagName("ARINC615OADLFData")[0]
		let ARINC615OADLFData = temp.attributes
		let resetTime = ARINC615OADLFData[1].value
		let ProtocolType = ARINC615OADLFData[2].value
		let LoadConditionText = ARINC615OADLFData[0].value
		$("#resetTime").textbox('setValue', resetTime)
		$("#ProtocolType").textbox('setValue', ProtocolType)
		$("#LoadConditionText").textbox('setValue', LoadConditionText)
		let LoaderAttachedDiscrete = temp.getElementsByTagName("LoaderAttachedDiscrete")[0]
		let id = LoaderAttachedDiscrete.attributes[0].value

		let rp = xml.getElementsByTagName("RP")
		//console.log('33333333', rp,id)
		for (let i = 0; i < rp.length; i++) {
			//console.log(rp[i].attributes[0],id)
			if (rp[i].attributes[0].value == id) {
				$('#LoadAttachedDiscrete').textbox('setValue', rp[i].attributes[2].value)
			}
		}
		//console.log("ARINC615OADLFData", ARINC615OADLFData, resetTime)
	}
	function numSorter(a, b) {
		a = parseFloat(a);
		b = parseFloat(b);
		return a == b ? 0 : (a > b ? 1 : -1);
	}
</script>


</html>